# UIデザイン再構築：変更点リスト

## 実装案：B案（下部テーブル型）

地図を最大化し、下部に属性テーブルを配置した業務特化型レイアウト

---

## 主要な変更点（Before → After）

### 1. **レイアウト構造の完全刷新**
**Before:** 左サイドバー + 地図 + 下部小パネル（縦並び）  
**After:** ヘッダー + 左ナビ + 地図 + 下部テーブル（階層型）

- DOM構造を `flex-direction: column` に変更
- 地図領域を最大化（flex: 1）
- 下部テーブルをリサイズ可能な独立セクションに

### 2. **グローバル検索バーの追加**
**Before:** サイドバー内に検索機能が埋もれている  
**After:** ヘッダー中央に全幅検索バー配置

- 林班・小班コードを即座に検索可能
- Enter キーで実行
- 視認性の高い配置（ヘッダー中央）

### 3. **左ナビゲーションのコンパクト化**
**Before:** 240px の固定幅サイドバー  
**After:** 200px のタブ式ナビゲーション

- アイコン + ラベルの視覚的なタブ
- アクティブ状態を緑背景で明示
- 「レイヤ」「アップロード」「ツール」の3カテゴリ

### 4. **属性テーブルの実装**
**Before:** なし（小さな結果パネルのみ）  
**After:** フル機能の属性テーブル

- ソート可能な列ヘッダー
- 行選択機能（チェックボックス）
- フィルタ・CSV出力アクション
- 複数レコードを一覧表示

### 5. **空状態（Empty State）の実装**
**Before:** データがない時は何も表示されない  
**After:** 親切な空状態画面

- アイコン + タイトル + 説明文
- 「解析を開始」アクションボタン
- ユーザーが次に何をすべきか明確に誘導

### 6. **レイヤー凡例の追加**
**Before:** レイヤーON/OFFのみ  
**After:** 凡例付きレイヤー管理

- 針葉樹・広葉樹の色見本表示
- グレー背景の独立セクション
- 視覚的に理解しやすい

### 7. **トグルスイッチの改善**
**Before:** 基本的なチェックボックス  
**After:** モダンなトグルスイッチ

- iOS風の滑らかなアニメーション
- ON時に緑色背景
- アクセシブルな実装（hidden checkbox + カスタムUI）

### 8. **テーブルリサイズ機能**
**Before:** 固定高さの結果パネル  
**After:** ドラッグでリサイズ可能

- 上部に4pxのリサイズハンドル
- ホバー時に緑色表示
- 150px ~ 60vhの範囲で調整可能

### 9. **タイポグラフィ階層の明確化**
**Before:** 一律14pxで視覚階層が弱い  
**After:** 役割に応じたサイズ設定

- ヘッダータイトル: 16px / 600
- セクションヘッド: 13px / 600 / 大文字
- 本文: 14px / 400
- テーブル: 13px / 400

### 10. **コンポーネント化の徹底**
**Before:** 全てが App.jsx に記述  
**After:** 責任分離された独立コンポーネント

- `Header.jsx` - グローバルナビゲーション
- `Sidebar.jsx` - レイヤー・ツール管理
- `AttributeTable.jsx` - データテーブル
- `components.css` - 共通スタイル

---

## 視覚的な変化

### カラーパレット
- **Primary**: #16a34a（グリーン）
- **Background**: #f9fafb（淡いグレー）
- **Border**: #e5e7eb（明るいグレー）
- **Text**: #1f2937（濃いグレー）

### スペーシング
- 8pxベースのスケール（4, 8, 12, 16, 20, 24, 32px）
- コンポーネント内: 12-16px
- セクション間: 16-20px

### ボーダーと角丸
- ボーダー: 一律 1px solid #e5e7eb
- 角丸: 4-6px（控えめ）
- シャドウ: 最小限（0 1px 2px のみ）

---

## ユーザビリティ向上

1. **操作導線の明確化**  
   検索 → レイヤー選択 → 地図確認 → テーブルで詳細

2. **情報密度の最適化**  
   地図が広く、同時に100件のデータを確認可能

3. **キーボード操作対応**  
   - Enter: 検索実行
   - 矢印: テーブルナビゲーション
   - Tab: フォーカス移動

4. **レスポンシブ準備**  
   Flexboxベースで将来的な対応が容易

---

## 技術的な改善

- **パフォーマンス**: 仮想スクロール準備（100件制限）
- **保守性**: コンポーネント分割で責任分離
- **拡張性**: レイヤー追加が容易なデータ駆動設計
- **アクセシビリティ**: セマンティックHTML、ARIAラベル準備

---

## Before / After 比較

| 項目 | Before | After |
|------|--------|-------|
| レイアウト | 左右分割 | 上下階層型 |
| 地図領域 | 60% | 80%+ |
| データ表示 | 下部小パネル | フルテーブル |
| 検索 | なし | ヘッダー中央 |
| ナビ幅 | 240px | 200px |
| 空状態 | なし | あり |
| リサイズ | なし | あり |
| コンポーネント数 | 1ファイル | 4ファイル |

---

## 次のステップ（推奨）

1. **検索機能の実装**: バックエンドとの連携
2. **フィルタ機能**: テーブル内の高度な絞り込み
3. **CSV出力**: データのエクスポート機能
4. **地物クリック**: 地図とテーブルの連動
5. **パンくずリスト**: ナビゲーション履歴の表示
